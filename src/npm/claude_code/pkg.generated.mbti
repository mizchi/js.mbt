// Generated using `moon info`, DON'T EDIT IT
package "mizchi/js/npm/claude_code"

import(
  "mizchi/js"
)

// Values
#alias(collect_messages)
async fn collectMessages(prompt~ : String, options? : QueryOptions) -> Array[SDKMessage]

fn get_result(Array[SDKMessage]) -> SDKResultMessage?

fn get_text(Array[SDKMessage]) -> String

fn query(prompt~ : String, options? : QueryOptions) -> SDKMessageIterator

#alias(query_stream)
fn queryStream(prompt~ : @js.Any, options? : QueryOptions) -> SDKMessageIterator

#alias(query_with_abort)
fn queryWithAbort(prompt~ : String, options? : QueryOptions) -> (SDKMessageIterator, AbortHandle)

#alias(simple_query)
async fn simpleQuery(prompt~ : String, options? : QueryOptions) -> String

// Errors

// Types and methods
#external
pub type AbortHandle
fn AbortHandle::abort(Self) -> Unit
impl @js.JsImpl for AbortHandle

pub(all) struct AgentDefinition {
  description : String
  allowed_tools : Array[String]?
  disallowed_tools : Array[String]?
  system_prompt : String?
  model : ClaudeModel?
}
fn AgentDefinition::as_any(Self) -> @js.Any

pub(all) enum ClaudeModel {
  Sonnet
  Opus
  Haiku
  Custom(String)
}
fn ClaudeModel::to_string(Self) -> String
impl Eq for ClaudeModel
impl Show for ClaudeModel

pub(all) enum ContentBlock {
  Text(TextBlock)
  ToolUse(ToolUseBlock)
  ToolResult(ToolResultBlock)
  Unknown(@js.Any)
}
fn ContentBlock::from_any(@js.Any) -> Self

pub(all) struct CostInfo {
  input_cost : Double
  output_cost : Double
  total_cost : Double
}
fn CostInfo::from_any(@js.Any) -> Self

pub(all) enum McpServerConfig {
  Stdio(McpServerStdio)
  Sse(McpServerSse)
}
fn McpServerConfig::as_any(Self) -> @js.Any

pub(all) struct McpServerSse {
  url : String
  headers : Map[String, String]
}
fn McpServerSse::as_any(Self) -> @js.Any

pub(all) struct McpServerStdio {
  command : String
  args : Array[String]
  env : Map[String, String]
}
fn McpServerStdio::as_any(Self) -> @js.Any

pub(all) struct PermissionDenial {
  tool_name : String
  reason : String
}
fn PermissionDenial::from_any(@js.Any) -> Self

pub(all) enum PermissionMode {
  Default
  AcceptEdits
  BypassPermissions
  Plan
}
fn PermissionMode::from_string(String) -> Self
fn PermissionMode::to_string(Self) -> String
impl Eq for PermissionMode
impl Show for PermissionMode

#external
pub type Query
fn Query::async_iterator(Self) -> @js.AsyncIterator[@js.Any]
impl @js.JsImpl for Query

pub(all) struct QueryOptions {
  model : ClaudeModel?
  permission_mode : PermissionMode?
  system_prompt : String?
  cwd : String?
  max_turns : Int?
  max_thinking_tokens : Int?
  allowed_tools : Array[String]?
  disallowed_tools : Array[String]?
  mcp_servers : Map[String, McpServerConfig]?
  agents : Map[String, AgentDefinition]?
  setting_sources : Array[SettingSource]?
  include_partial_messages : Bool?
  resume_session : String?
}
fn QueryOptions::as_any(Self) -> @js.Any
fn QueryOptions::new() -> Self

pub(all) struct SDKAssistantMessage {
  role : String
  content : Array[ContentBlock]
  raw : @js.Any
}
fn SDKAssistantMessage::from_any(@js.Any) -> Self

pub(all) enum SDKMessage {
  Assistant(SDKAssistantMessage)
  User(SDKUserMessage)
  Result(SDKResultMessage)
  System(SDKSystemMessage)
  Partial(SDKPartialMessage)
  Unknown(@js.Any)
}
fn SDKMessage::from_any(@js.Any) -> Self

pub(all) struct SDKMessageIterator {
  raw : @js.AsyncIterator[@js.Any]
}
async fn SDKMessageIterator::next(Self) -> SDKMessage?

pub(all) struct SDKPartialMessage {
  content : Array[ContentBlock]
  raw : @js.Any
}
fn SDKPartialMessage::from_any(@js.Any) -> Self

pub(all) struct SDKResultMessage {
  success : Bool
  duration_ms : Int
  usage : TokenUsage
  cost : CostInfo?
  permission_denials : Array[PermissionDenial]
  raw : @js.Any
}
fn SDKResultMessage::from_any(@js.Any) -> Self

pub(all) struct SDKSystemMessage {
  tools : Array[String]
  mcp_servers : Array[String]
  model : String
  permission_mode : PermissionMode
  raw : @js.Any
}
fn SDKSystemMessage::from_any(@js.Any) -> Self

pub(all) struct SDKUserMessage {
  role : String
  content : String
  raw : @js.Any
}
fn SDKUserMessage::from_any(@js.Any) -> Self

pub(all) enum SettingSource {
  User
  Project
  Local
}
fn SettingSource::to_string(Self) -> String
impl Eq for SettingSource
impl Show for SettingSource

pub(all) struct TextBlock {
  text : String
  raw : @js.Any
}
fn TextBlock::from_any(@js.Any) -> Self

pub(all) struct TokenUsage {
  input_tokens : Int
  output_tokens : Int
  cache_read_input_tokens : Int
  cache_creation_input_tokens : Int
}
fn TokenUsage::from_any(@js.Any) -> Self

pub(all) struct ToolResultBlock {
  tool_use_id : String
  content : String
  is_error : Bool
  raw : @js.Any
}
fn ToolResultBlock::from_any(@js.Any) -> Self

pub(all) struct ToolUseBlock {
  id : String
  name : String
  input : @js.Any
  raw : @js.Any
}
fn ToolUseBlock::from_any(@js.Any) -> Self

// Type aliases

// Traits

